---
title: "VRChat用アバターをVRMにして読む"
---


----

## UnityでVRM変換する

Unityよくわからん人向け。
Unityにインポートした後、そのままVRM出力する。表示が紫だろうが気にしない。
ただし揺れ骨は動かない。


詳しい人向け。
ある程度MToonマテリアルを組んでおくと、後段の手順が減る。
VRMSpringBoneも組めるとなお良い。

## マテリアルをセットアップする

前段でそのまま出力した人向け。
インポート時のマテリアル最適化をOFFする。
テクスチャを2箇所セットすればOK。

影色はMToonMaterialSystemで一括適用できる。マテリアル毎に設定しても良い。

他の調整は基礎編や撮影編へ。

## 目を前面に描画する（中級者向け）

StencilMaskを利用する。目や眉毛が前髪より手前に描画される。

マテリアル設定により、Stencilが2の場所について、透明度を任意に設定できるようになる。

## AngelRingを描画する（上級者向け）

UV2でAngelRingを設定しているモデルのみ。
UniVRMを拡張し、UV2をエクスポートできるようにする。

マテリアル設定により、テクスチャを設定する。

### UniGLTFでUV2を出力する

起点のソースは`MeshExporter.cs`です。

キーワード`TEXCOORD_0`で検索し、その行の後ろに`TEXCOORD_1`として同じ処理を追加します。
`TEXCOORD_0`のデータ作成時に`.uv`を参照している箇所があります。`TEXCOORD_1`向けには`.uv2`に書き換えます。

Unityでソースをビルドすると何度かエラーが出ます。その都度 `TEXCOORD_1`の処理を追加すればOKです。
